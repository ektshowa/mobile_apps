<!DOCTYPE html>
<html>
{% load staticfiles %}
    <head>
        <title>Recencement de la Population - Agent Recenseur</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="{% static "census/css/themes/1/census-mobile-app.min.css" %}" rel="stylesheet" />
        <link href="{% static "census/css/themes/1/jquery.mobile.icons.min.css" %}" rel="stylesheet" />
        <link href="{% static "census/jqm/1.4.5/jquery.mobile.structure-1.4.5.min.css" %}" rel="stylesheet" />
        <link href="{% static "census/css/app.css" %}" rel="stylesheet" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
        <script src="{% static "census/js/settings.js" %}" type="text/javascript"></script>
        <script src="{% static "census/js/api-messages.js" %}" type="text/javascript"></script>
        <script src="{% static "census/js/resident_page_html.js" %}" type="text/javascript"></script>
        <script src="{% static "census/js/census-household-record.js" %}" type="text/javascript"></script>
        <script src="{% static "census/jqm/1.4.5/jquery.mobile-1.4.5.min.js" %}"></script>
    </head>
    <body>
        <form action="" method="post">
            <div data-role="page" id="household_rec" class="a-page">
                <div data-role="header" data-theme="c">
                    <a href="" data-icon="carat-l">Retour</a>
                    <h1>R.D.C. Recensement</h1>
                    <a href="" data-icon="info">Contact</a>
                </div>
                <div role="main" class="ui-content">
                    <h2>Enregistrez le M&eacute;nage</h2>
                    <div data-role="fieldcontain">
                        <label for="census_agent_id">Num&eacute;ro de l'Agent Recenseur:</label>
                        <input type="text" name="census_agent_id" id="census_agent_id" value="" />
                    </div>
                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup">
                            <legend>
                                Enregistrement cr&eacute;er par:
                            </legend>
                            <input type="radio" name="filled_by" id="filled_by_agent" class="custom" value="agent"/>
                            <label for="filled_by_agent">
                                Agent Recenseur
                            </label>
                            <input type="radio" name="filled_by" id="filled_by_househead" class="custom" value="househead"/>
                            <label for="filled_by_househead">
                                Chef de M&eacute;nage
                            </label>
                        </fieldset>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="household_id">Num&eacute;ro du m&eacute;nage:</label>
                        <input type="text" name="household_id" id="household_id" value="" />
                    </div>
                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-type="horizontal">
                            <legend>Date du Recensement:</legend>
                            <label for="filling_date_day">Jour</label>
                            <select name="filling_date_day" id="filling_date_day">
                                <option>Jour</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                                <option value="24">24</option>
                                <option value="25">25</option>
                                <option value="26">26</option>
                                <option value="27">27</option>
                                <option value="28">28</option>
                                <option value="29">29</option>
                                <option value="30">30</option>
                                <option value="31">31</option>
                            </select>
                            <label for="filling_date_month">Mois</label>
                            <select name="filling_date_month" id="filling_date_month">
                                <option>Janvier</option>
                                <option>F&eacute;vrier</option>
                                <option>Mars</option>
                                <option>Avril</option>
                                <option>Mai</option>
                                <option>Juin</option>
                                <option>Juillet</option>
                                <option>Ao&ucirc;t</option>
                                <option>Septembre</option>
                                <option>Octobre</option>
                                <option>Novembre</option>
                                <option>D&eacute;cembre</option>
                            </select>
                            <label for="filling_date_year">Ann&eacute;e</label>
                            <select name="filling_date_year" id="filling_date_year">
                                <option>Ann&eacute;e</option>
                                <option>2021</option>
                                <option>2022</option>
                            </select>
                        </fieldset>
                    </div>
                    <p>
                        Nombre de r&eacute;sidents pr&eacute;ents:
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <label for="male_present_resident_num">
                                    Masculin:
                                </label>
                                <input type="text" name="male_present_resident_num" id="male_present_resident_num" value="" />
                            </div>
                            <div class="ui-block-b">
                                <label for="female_present_resident_num">
                                    F&eacute;minin:
                                </label>
                                <input type="text" name="male_present_resident_num" id="male_present_resident_num" value="" />
                            </div>
                        </div>
                    </p>
                    <p>
                        Nombre de r&eacute;sidents absents:
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <label for="male_absent_resident_num">
                                    Masculin:
                                </label>
                                <input type="text" name="male_absent_resident_num" id="male_absent_resident_num" value="" />
                            </div>
                            <div class="ui-block-b">
                                <label for="female_absent_resident_num">
                                    F&eacute;minin:
                                </label>
                                <input type="text" name="male_absent_resident_num" id="male_absent_resident_num" value="" />
                            </div>
                        </div>
                    </p>
                    <p>
                        Nombre de visiteurs:
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <label for="male_visiting_num">
                                    Masculin:
                                </label>
                                <input type="text" name="male_visiting_num" id="male_visiting_num" value="" />
                            </div>
                            <div class="ui-block-b">
                                <label for="female_visiting_num">
                                    F&eacute;minin:
                                </label>
                                <input type="text" name="female_visiting_num" id="female_visiting_num" value="" />
                            </div>
                        </div>
                    </p>
                    <p>
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <a data-role="button" href="">
                                    Annuler
                                </a>
                            </div>
                            <div class="ui-block-b">
                                <a data-role="button" href="#household_address">
                                    Continue
                                </a>
                            </div>
                        </div>
                    </p>
                </div>
                <div data-role="footer">
                    <h4>Copyright Fonsdom &copy; 2020</h4>
                </div>
            </div>
            <div data-role="page" id="household_address" class="a-page">
                <div data-role="header" data-theme="c">
                    <a href="#household_rec" data-icon="carat-l">Retour</a>
                    <h1>R.D.C. Recensement</h1>
                    <a href="" data-icon="info">Contact</a>
                </div>
                <div role="main" class="ui-content">
                    <h2>Ajoutez l'Adresse du M&eacute;nage</h2>
                    <div data-role="fieldcontain">
                        <label for="select_province">Province:</label>
                        <select name="select_province" id="select_province" data-native-menu="false">
                            <option>Choisissez la province</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="select_city">Ville ou T&eacute;rritoire:</label>
                        <select name="select_city" id="select_city" data-native-menu="false">
                            <option>Choisissez la ville ou t&eacute;rritoire</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="select_commune">Commune:</label>
                        <select name="select_commune" id="select_commune" data-native-menu="false">
                            <option>Choisissez la commune</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain">
                       <label for="neighborhood">Quartier:</label>
                       <input type="text" name="neighborhood" id="neighborhood" value="" />
                    </div>
                    <div data-role="fieldcontain">
                        <label for="street">Avenue:</label>
                        <input type="text" name="street" id="street" value="" />
                     </div>
                     <div data-role="fieldcontain">
                        <label for="house_num">Num&eacute;ro:</label>
                        <input type="text" name="house_num" id="house_num" value="" />
                     </div>
                     <p>
                         <div class="ui-grid-a">
                             <div class="ui-block-a">
                                 <a data-role="button" href="">
                                     Annuler
                                 </a>
                             </div>
                             <div class="ui-block-b">
                                 <!--<input type="submit" data-theme="b" value="Cr&eacute;ez le Compte" />-->
                                 <a data-role="button" href="#household_resident">
                                    Continue
                                </a>
                             </div>
                         </div>
                     </p>
                </div>
                <div data-role="footer">
                    <h4>Copyright Fonsdom &copy; 2020</h4>
                </div>
            </div>
            <div data-role="page" id="household_resident" class="a-page resident_info">
                <div data-role="header" data-theme="c">
                    <a href="" data-icon="carat-l">Retour</a>
                        <h1>R.D.C. Recensement</h1>
                    <a href="" data-icon="info">Contact</a>
                </div>
                <div role="main" class="ui-content">
                    <h2>R&eacute;sidents du M&eacute;nage</h2>
                    <h4>Personne 1</h4>
                    <div data-role="fieldcontain">
                        <label for="first_name">Pr&eacute;nom:</label>
                        <input type="text" name="first_name" id="first_name" value="" />
                    </div>
                    <div data-role="fieldcontain">
                        <label for="last_name">Nom:</label>
                        <input type="text" name="last_name" id="last_name" value="" />
                    </div>
                    <div data-role="fieldcontain">
                        <label for="head_household_link">Lien avec le Chef de M&eacute;nage:</label>
                        <select name="head_household_link" id="head_household_link" data-native-menu="false">
                            <option>Choisissez le lien avec le Chef de M&eacute;nage </option>
                        </select>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="marrital_status">Statut matrimonial:</label>
                        <select name="marrital_status" id="marrital_status" class="marr_status" data-native-menu="false">
                            <option>Choisissez le statut matrimonial</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="marriage_type">Type de mariage:</label>
                        <select name="marriage_type" id="marriage_type" class="marr_type" data-native-menu="false">
                            <option>Choisissez le type de mariage</option>
                        </select>
                    </div>
                    <p>
                        Date de Naissance:
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <fieldset data-role="controlgroup" data-type="horizontal">
                                    <legend>Date:</legend>
                                    <label for="birth_date_day">Jour</label>
                                    <select name="birth_date_day" id="birth_date_day">
                                        <option>Jour</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="8">8</option>
                                        <option value="9">9</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                        <option value="13">13</option>
                                        <option value="14">14</option>
                                        <option value="15">15</option>
                                        <option value="16">16</option>
                                        <option value="17">17</option>
                                        <option value="18">18</option>
                                        <option value="19">19</option>
                                        <option value="20">20</option>
                                        <option value="21">21</option>
                                        <option value="22">22</option>
                                        <option value="23">23</option>
                                        <option value="24">24</option>
                                        <option value="25">25</option>
                                        <option value="26">26</option>
                                        <option value="27">27</option>
                                        <option value="28">28</option>
                                        <option value="29">29</option>
                                        <option value="30">30</option>
                                        <option value="31">31</option>
                                    </select>
                                    <label for="birth_date_month">Mois</label>
                                    <select name="birth_date_month" id="birth_date_month">
                                        <option>Janvier</option>
                                        <option>F&eacute;vrier</option>
                                        <option>Mars</option>
                                        <option>Avril</option>
                                        <option>Mai</option>
                                        <option>Juin</option>
                                        <option>Juillet</option>
                                        <option>Ao&ucirc;t</option>
                                        <option>Septembre</option>
                                        <option>Octobre</option>
                                        <option>Novembre</option>
                                        <option>D&eacute;cembre</option>
                                    </select>
                                    <label for="birth_date_year">Ann&eacute;e</label>
                                    <select name="birth_date_year" id="birth_date_year">
                                        <option>Ann&eacute;e</option>
                                        <option>2021</option>
                                        <option>2022</option>
                                    </select>
                                </fieldset>
                            </div>
                            <div class="ui-block-b">
                                <label for="resident_age">
                                    Age:
                                </label>
                                <input type="text" name="resident_age" id="resident_age" value="" />
                            </div>
                        </div>
                    </p>
                    <p>
                        Lieu de Naissance
                        <div class="ui-grid-a">
                            <div class="ui-block-b">
                                <div data-role="fieldcontain">
                                    <fieldset data-role="controlgroup"data-type="horizontal" >
                                        <!--<legend>&Eacute;quipe en zone Urbaine/Rurale?:</legend>-->
                                        <input type="radio" name="zone_type" id="zone_type_urban" value="zone_type_urban" checked="checked" />
                                        <label for="zone_type_urban">Urbaine</label>
                                        <input type="radio" name="zone_type" id="zone_type_rural" value="zone_type_rural" />
                                        <label for="zone_type_rural">Rurale</label>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="ui-block-b">
                                <fieldset data-role="controlgroup">
                                    <div id="div_birth_province">
                                        <select name="birth_province" id="birth_province" data-native-menu="false">
                                            <option>Choisissez la province</option>
                                        </select>
                                    </div>
                                    <div id="div_birth_territory" class="bi-invisible">
                                        <select name="birth_territory" class="smallest_unit" id="birth_territory" data-native-menu="false">
                                            <option>Choisissez le territoire</option>
                                        </select>
                                    </div>
                                    <div id="div_birth_city">
                                        <select name="birth_city" id="birth_city" data-native-menu="false">
                                            <option>Choisissez la ville</option>
                                        </select>
                                    </div>
                                    <div id="div_birth_commune">
                                        <select name="birth_commune" class="smallest_unit" id="birth_commune" data-native-menu="false">
                                            <option>Choisissez la commune</option>
                                        </select>
                                    </div>
                                </fieldset>
                                <!--<div class="ui-block-c" id="div_birth_province">
                                    <select name="birth_province" id="birth_province" data-native-menu="false">
                                        <option>Choisissez la province</option>
                                    </select>
                                </div>
                                <div class="ui-block-c bi-invisible" id="div_birth_territory">
                                    <select name="birth_territory" class="smallest_unit" id="birth_territory" data-native-menu="false">
                                        <option>Choisissez le territoire</option>
                                    </select>
                                </div>
                                <div class="ui-block-c" id="div_birth_city">
                                    <select name="birth_city" id="birth_city" data-native-menu="false">
                                        <option>Choisissez la ville</option>
                                    </select>
                                </div>
                                <div class="ui-block-c" id="div_birth_commune">
                                    <select name="birth_commune" class="smallest_unit" id="birth_commune" data-native-menu="false">
                                        <option>Choisissez la commune</option>
                                    </select>
                                </div>-->
                            </div>
                        </div>
                    </p>
                    <div data-role="fieldcontain">
                        <label for="highest_diploma">Plus haut dipl&ocirc;me obtenu:</label>
                        <select name="highest_diploma" id="highest_diploma" data-native-menu="false">
                            <option>Choisissez le dipl&ocirc;me</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="occupation_status">Status de l'emploi:</label>
                        <select name="occupation_status" id="occupation_status" data-native-menu="false">
                            <option>Choisissez le status de l'emploi</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="occupation_situation">Situation de l'emploi:</label>
                        <select name="occupation_situation" id="occupation_situation" data-native-menu="false">
                            <option>Choisissez la situation de l'emploi</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="occupation">Occupation:</label>
                        <input type="text" name="occupation" id="occupation" value="" />
                    </div>
                    <div data-role="fieldcontain">
                        <label for="religion">Religion:</label>
                        <select name="religion" id="religion" data-native-menu="false">
                            <option>Choisissez la religion</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="handicap">Type de l'handicap:</label>
                        <select name="handicap" id="handicap" data-native-menu="false">
                            <option>Choisissez le type d'handicap</option>
                        </select>
                    </div>
                    <p>
                        <div class="ui-grid-a">
                            <div class="ui-block-c">
                                <a data-role="button" href="">
                                    Sauvez partiellement
                                </a>
                            </div>
                            <div class="ui-block-c">
                                <a data-role="button" href="#agent_address">
                                    Retour
                                </a>
                            </div>
                            <div class="ui-block-c">
                                <a data-role="button" href="#household_resident-2" class="more_resident">
                                    Continue
                                </a>
                            </div>
                        </div>
                    </p>
                </div>
                <div data-role="footer">
                    <h4>Copyright Fonsdom &copy; 2020</h4>
                </div>
            </div>
        </form>
    </body>
</html>

<script>

$(document).ready(function () {

{% block domready %}

CensusHouseholdRecord.get_provinces_choices("select_province", "{% url 'census_api:provinces' %}");

CensusHouseholdRecord.get_provinces_choices("birth_province", "{% url 'census_api:provinces' %}");

// Set head household links choices for the first resident
ResidentRecord.get_head_household_link_choices("", "{% url 'census_api:head_household_links' %}");

// Set marrital status codes choices
ResidentRecord.get_marrital_status_choices("", "{% url 'census_api:marrital_status_codes' %}");

// Set marrital type choices
ResidentRecord.get_marrital_type_choices("", "{% url 'census_api:marriage_type_codes' %}");

// Set highest diploma choices
//ResidentRecord.get_highest_diploma_choices("");

// Set occupation status choices
ResidentRecord.get_occupation_status_choices("", "{% url 'census_api:occup_status_codes' %}");

// Set occupation situation choices
ResidentRecord.get_occupation_situation_choices("", "{% url 'census_api:occup_situation_codes' %}");

// Set religion choices
ResidentRecord.get_religion_choices("", "{% url 'census_api:religion_codes' %}");

// Set handicap choices
//ResidentRecord.get_handicap_choices("");

$(document).on("click", ".more_resident", function(ev) {
        ev.preventDefault();
        console.log("IN NEW RESIDENT INFO");
        var resident_list = $("form").find(".resident_info");
        var ind = resident_list.length;
        ind++;
        console.log("INDICE "+ ind);
        ind = ind.toString();
        var res_html = ResidentRecord.get_record_html(ind);
        //console.log(res_html);
        $("form").append(res_html);
        $.mobile.navigate("#household_resident-"+ind);
        if (parseInt(ind) > 1) {
            console.log("CREATE HOUSEHOLD OPTIONS " + ind);
            ResidentRecord.get_head_household_link_choices(ind);
            ResidentRecord.get_marrital_status_choices(ind);
            ResidentRecord.get_marrital_type_choices(ind);
            ResidentRecord.get_highest_diploma_choices(ind);
            ResidentRecord.get_occupation_status_choices(ind);
            ResidentRecord.get_occupation_situation_choices(ind);
            ResidentRecord.get_religion_choices(ind);
            ResidentRecord.get_handicap_choices(ind);
        }
});


{% endblock %}

});

</script>