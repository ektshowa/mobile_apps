<!DOCTYPE html>
<html>
{% load staticfiles %}
    <head>
        <title>Recencement de la Population - Agent Recenseur</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="{% static "census/css/themes/1/census-mobile-app.min.css" %}" rel="stylesheet" />
        <link href="{% static "census/css/themes/1/jquery.mobile.icons.min.css" %}" rel="stylesheet" />
        <link href="{% static "census/jqm/1.4.5/jquery.mobile.structure-1.4.5.min.css" %}" rel="stylesheet" />
        <link href="{% static "census/css/app.css" %}" rel="stylesheet" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
        <script src="{% static "census/js/settings.js" %}" type="text/javascript"></script>
        <script src="{% static "census/js/api-messages.js" %}" type="text/javascript"></script>
        <script src="{% static "census/js/resident_page_html.js" %}" type="text/javascript"></script>
        <script src="{% static "census/js/census-household-record.js" %}" type="text/javascript"></script>
        <script src="{% static "census/jqm/1.4.5/jquery.mobile-1.4.5.min.js" %}"></script>
    </head>
    <body>
        <form action="" method="post">
            <div data-role="page" id="household_rec" class="a-page">
                <div data-role="header" data-theme="c">
                    <a href="{% url 'census:index' %}" data-icon="carat-l">Retour</a>
                    <h1>R.D.C. Recensement</h1>
                    <a href="" data-icon="info">Contact</a>
                </div>
                <div role="main" class="ui-content">
                    <h2>Enregistrez le M&eacute;nage</h2>

                    <!--<a href="#filler_choice_dialog" data-rel="popup" data-position-to="window" data-transition="pop" 
                        class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b">
                            Qui cr&eacute;er l'enregistrement?
                    </a>-->
                    <a href = "#filler_choice_dialog" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b">
                        Qui cr&eacute;er l'enregistrement?
                    </a>

                    <div data-role="fieldcontain">
                        <label for="census_agent_id">Num&eacute;ro de l'Agent Recenseur:</label>
                        <input type="text" name="census_agent_id" id="census_agent_id" value="" />
                    </div>
                    <!--<div data-role="fieldcontain">
                        <fieldset data-role="controlgroup">
                            <legend>
                                Enregistrement cr&eacute;er par:
                            </legend>
                            <input type="radio" name="filled_by" id="filled_by_agent" class="custom" value="agent"/>
                            <label for="filled_by_agent">
                                Agent Recenseur
                            </label>
                            <input type="radio" name="filled_by" id="filled_by_househead" class="custom" value="househead"/>
                            <label for="filled_by_househead">
                                Chef de M&eacute;nage
                            </label>
                        </fieldset>
                    </div>-->
                    <div data-role="fieldcontain">
                        <label for="household_id">Num&eacute;ro du m&eacute;nage:</label>
                        <input type="text" name="household_id" id="household_id" value="" />
                    </div>
                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-type="horizontal">
                            <legend>Date du Recensement:</legend>
                            <label for="filling_date_day">Jour</label>
                            <select name="filling_date_day" id="filling_date_day">
                                <option>Jour</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                                <option value="24">24</option>
                                <option value="25">25</option>
                                <option value="26">26</option>
                                <option value="27">27</option>
                                <option value="28">28</option>
                                <option value="29">29</option>
                                <option value="30">30</option>
                                <option value="31">31</option>
                            </select>
                            <label for="filling_date_month">Mois</label>
                            <select name="filling_date_month" id="filling_date_month">
                                <option>Janvier</option>
                                <option>F&eacute;vrier</option>
                                <option>Mars</option>
                                <option>Avril</option>
                                <option>Mai</option>
                                <option>Juin</option>
                                <option>Juillet</option>
                                <option>Ao&ucirc;t</option>
                                <option>Septembre</option>
                                <option>Octobre</option>
                                <option>Novembre</option>
                                <option>D&eacute;cembre</option>
                            </select>
                            <label for="filling_date_year">Ann&eacute;e</label>
                            <select name="filling_date_year" id="filling_date_year">
                                <option>Ann&eacute;e</option>
                                <option>2021</option>
                                <option>2022</option>
                            </select>
                        </fieldset>
                    </div>
                    <p>
                        Nombre de r&eacute;sidents pr&eacute;ents:
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <label for="male_present_resident_num">
                                    Masculin:
                                </label>
                                <input type="text" name="male_present_resident_num" id="male_present_resident_num" value="" />
                            </div>
                            <div class="ui-block-b">
                                <label for="female_present_resident_num">
                                    F&eacute;minin:
                                </label>
                                <input type="text" name="female_present_resident_num" id="female_present_resident_num" value="" />
                            </div>
                        </div>
                    </p>
                    <p>
                        Nombre de r&eacute;sidents absents:
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <label for="male_absent_resident_num">
                                    Masculin:
                                </label>
                                <input type="text" name="male_absent_resident_num" id="male_absent_resident_num" value="" />
                            </div>
                            <div class="ui-block-b">
                                <label for="female_absent_resident_num">
                                    F&eacute;minin:
                                </label>
                                <input type="text" name="female_absent_resident_num" id="female_absent_resident_num" value="" />
                            </div>
                        </div>
                    </p>
                    <p>
                        Nombre de visiteurs:
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <label for="male_visiting_num">
                                    Masculin:
                                </label>
                                <input type="text" name="male_visiting_num" id="male_visiting_num" value="" />
                            </div>
                            <div class="ui-block-b">
                                <label for="female_visiting_num">
                                    F&eacute;minin:
                                </label>
                                <input type="text" name="female_visiting_num" id="female_visiting_num" value="" />
                            </div>
                        </div>
                    </p>
                    <p>
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <a data-role="button" href="">
                                    Annuler
                                </a>
                            </div>
                            <div class="ui-block-b">
                                <a data-role="button" href="#household_address">
                                    Continue
                                </a>
                            </div>
                        </div>
                    </p>
                </div>
                <div data-role="footer">
                    <h4>Copyright Fonsdom &copy; 2020</h4>
                </div>
            </div>
            
            <div data-role="page" id="household_address" class="a-page">
                <div data-role="header" data-theme="c">
                    <a href="#household_rec" data-icon="carat-l">Retour</a>
                    <h1>R.D.C. Recensement</h1>
                    <a href="" data-icon="info">Contact</a>
                </div>
                <div role="main" class="ui-content">
                    <h2>Ajoutez l'Adresse du M&eacute;nage</h2>
                    <div class="ui-field-contain">
                        <fieldset data-role="controlgroup"data-type="horizontal" >
                            <!--<legend>&Eacute;quipe en zone Urbaine/Rurale?:</legend>-->
                            <input type="radio" name="select_zone_type" class="zone_type" id="select_zone_type_urban" value="zone_type_urban" checked="checked" />
                            <label for="select_zone_type_urban">Urbaine</label>
                            <input type="radio" name="select_zone_type" class="zone_type" id="select_zone_type_rural" value="zone_type_rural" />
                            <label for="select_zone_type_rural">Rurale</label>
                        </fieldset>
                    </div>
                    <div data-role="fieldcontain" id="div_select_province">
                        <label for="select_province">Province:</label>
                        <select name="select_province" id="select_province" class="province_choice" data-native-menu="false">
                            <option>Choisissez la province</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain" id="div_select_city">
                        <label for="select_city">Ville ou T&eacute;rritoire:</label>
                        <select name="select_city" id="select_city" class="city_choice" data-native-menu="false">
                            <option>Choisissez la ville ou t&eacute;rritoire</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain" id="div_select_commune">
                        <label for="select_commune">Commune:</label>
                        <select name="select_commune" id="select_commune" data-native-menu="false">
                            <option>Choisissez la commune</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain" id="div_select_neighborhood">
                       <label for="neighborhood">Quartier:</label>
                       <input type="text" name="neighborhood" id="neighborhood" value="" />
                    </div>
                    <div data-role="fieldcontain" id="div_select_street">
                        <label for="street">Avenue:</label>
                        <input type="text" name="street" id="street" value="" />
                     </div>
                     <div data-role="fieldcontain" id="div_select_house_num">
                        <label for="house_num">Num&eacute;ro:</label>
                        <input type="text" name="house_num" id="house_num" value="" />
                     </div>
                     <div data-role="fieldcontain" id="div_select_territory" class="bi-invisible">
                        <label for="select_territory">Territoire:</label>
                        <select name="select_territory" class="smallest_unit" id="select_territory" data-native-menu="false">
                            <option>Choisissez le territoire</option>
                        </select>
                    </div>
                    <p>
                         <div class="ui-grid-a">
                             <div class="ui-block-a">
                                 <a data-role="button" href="">
                                     Annuler
                                 </a>
                             </div>
                             <div class="ui-block-b">
                                 <!--<input type="submit" data-theme="b" value="Cr&eacute;ez le Compte" />-->
                                 <a data-role="button" href="#household_resident">
                                    Continue
                                </a>
                             </div>
                         </div>
                     </p>
                </div>
                <div data-role="footer">
                    <h4>Copyright Fonsdom &copy; 2020</h4>
                </div>
            </div>
            <div data-role="page" id="household_resident" class="a-page resident_info more_resident_page">
                <div data-role="header" data-theme="c">
                    <a href="#household_address" data-icon="carat-l">Retour</a>
                        <h1>R.D.C. Recensement</h1>
                    <a href="" data-icon="info">Contact</a>
                </div>
                <div role="main" class="ui-content">
                    <h2>R&eacute;sidents du M&eacute;nage</h2>
                    <h4>Personne 1</h4>
                    <div class="ui-field-contain">
                        <label for="first_name">Pr&eacute;nom:</label>
                        <input type="text" name="first_name" id="first_name" value="" />
                    </div>
                    <div class="ui-field-contain">
                        <label for="last_name">Nom:</label>
                        <input type="text" name="last_name" id="last_name" value="" />
                    </div>
                    <div data-role="fieldcontain">
                        <label for="head_household_link">Lien avec le Chef de M&eacute;nage:</label>
                        <select name="head_household_link" id="head_household_link" data-native-menu="false">
                            <option>Choisissez le lien avec le Chef de M&eacute;nage</option>
                            <option value="1">Chef de Ménage</option>
                            <option value="2">Conjoint du Chef de Ménage</option>
                            <option value="3">Père ou Mère</option>
                            <option value="4">Fils ou Fille</option>
                            <option value="5">Frère ou Soeur</option>
                            <option value="6">Neveu ou Nièce</option>
                            <option value="7">Autre Parent</option>
                            <option value="8">Aucun Lien</option>
                        </select>
                    </div>
                    <div class="ui-field-contain">
                        <label for="marrital_status">Statut matrimonial:</label>
                        <select name="marrital_status" id="marrital_status" class="marr_status" data-native-menu="false">
                            <option>Choisissez le statut matrimonial</option>
                            <option value="1">Célibataire</option>
                            <option value="2">Union Libre</option>
                            <option value="3">Marié avec une Femme</option>
                            <option value="4">Marié avec deux Femmes</option>
                            <option value="5">Marié avec plud de deux Femmes</option>
                            <option value="6">Séparé(e)</option>
                            <option value="7">Divorcé(e)</option>
                            <option value="8">Veuf(ve)</option>
                        </select>
                    </div>
                    <div class="ui-field-contain">
                        <label for="marriage_type">Type de mariage:</label>
                        <select name="marriage_type" id="marriage_type" class="marr_type" data-native-menu="false">
                            <option>Choisissez le type de mariage</option>
                            <option value="1">Mariage Légal</option>
                            <option value="2">Mariage Coutumier</option>
                            <option value="3">Mariage Religieux</option>
                            <option value="4">Mariage Légal et Coutumier</option>
                            <option value="5">Mariage Légal et Religieux</option>
                            <option value="6">Coutumier et Religieux</option>
                            <option value="7">Coutumier, Religieux et Légal</option>
                            <option value="8">Néant</option>
                        </select>
                    </div>
                    <p>
                        Date de Naissance:
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <fieldset data-role="controlgroup" data-type="horizontal">
                                    <legend>Date:</legend>
                                    <label for="birth_date_day">Jour</label>
                                    <select name="birth_date_day" id="birth_date_day">
                                        <option>Jour</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="8">8</option>
                                        <option value="9">9</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                        <option value="13">13</option>
                                        <option value="14">14</option>
                                        <option value="15">15</option>
                                        <option value="16">16</option>
                                        <option value="17">17</option>
                                        <option value="18">18</option>
                                        <option value="19">19</option>
                                        <option value="20">20</option>
                                        <option value="21">21</option>
                                        <option value="22">22</option>
                                        <option value="23">23</option>
                                        <option value="24">24</option>
                                        <option value="25">25</option>
                                        <option value="26">26</option>
                                        <option value="27">27</option>
                                        <option value="28">28</option>
                                        <option value="29">29</option>
                                        <option value="30">30</option>
                                        <option value="31">31</option>
                                    </select>
                                    <label for="birth_date_month">Mois</label>
                                    <select name="birth_date_month" id="birth_date_month">
                                        <option>Janvier</option>
                                        <option>F&eacute;vrier</option>
                                        <option>Mars</option>
                                        <option>Avril</option>
                                        <option>Mai</option>
                                        <option>Juin</option>
                                        <option>Juillet</option>
                                        <option>Ao&ucirc;t</option>
                                        <option>Septembre</option>
                                        <option>Octobre</option>
                                        <option>Novembre</option>
                                        <option>D&eacute;cembre</option>
                                    </select>
                                    <label for="birth_date_year">Ann&eacute;e</label>
                                    <select name="birth_date_year" id="birth_date_year">
                                        <option>Ann&eacute;e</option>
                                        <option>2021</option>
                                        <option>2022</option>
                                    </select>
                                </fieldset>
                            </div>
                            <div class="ui-block-b">
                                <label for="resident_age">
                                    Age:
                                </label>
                                <input type="text" name="resident_age" id="resident_age" value="" />
                            </div>
                        </div>
                    </p>
                    <p>
                        Lieu de Naissance
                        <div class="ui-grid-a">
                            <div class="ui-block-b">
                                <div class="ui-field-contain">
                                    <fieldset data-role="controlgroup"data-type="horizontal" >
                                        <!--<legend>&Eacute;quipe en zone Urbaine/Rurale?:</legend>-->
                                        <input type="radio" name="birth_zone_type" class="zone_type" id="birth_zone_type_urban" value="zone_type_urban" checked="checked" />
                                        <label for="birth_zone_type_urban">Urbaine</label>
                                        <input type="radio" name="birth_zone_type" class="zone_type" id="birth_zone_type_rural" value="zone_type_rural" />
                                        <label for="birth_zone_type_rural">Rurale</label>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="ui-block-b">
                                <fieldset data-role="controlgroup">
                                    <div id="div_birth_province">
                                        <select name="birth_province" id="birth_province" class="province_choice" data-native-menu="false">
                                            <option>Choisissez la province</option>
                                        </select>
                                    </div>
                                    <div id="div_birth_territory" class="bi-invisible">
                                        <select name="birth_territory" class="smallest_unit" id="birth_territory" data-native-menu="false">
                                            <option>Choisissez le territoire</option>
                                        </select>
                                    </div>
                                    <div id="div_birth_city">
                                        <select name="birth_city" id="birth_city"  class="city_choice" data-native-menu="false">
                                            <option>Choisissez la ville</option>
                                        </select>
                                    </div>
                                    <div id="div_birth_commune">
                                        <select name="birth_commune" class="smallest_unit" id="birth_commune" data-native-menu="false">
                                            <option>Choisissez la commune</option>
                                        </select>
                                    </div>
                                </fieldset>
                                <!--<div class="ui-block-c" id="div_birth_province">
                                    <select name="birth_province" id="birth_province" data-native-menu="false">
                                        <option>Choisissez la province</option>
                                    </select>
                                </div>
                                <div class="ui-block-c bi-invisible" id="div_birth_territory">
                                    <select name="birth_territory" class="smallest_unit" id="birth_territory" data-native-menu="false">
                                        <option>Choisissez le territoire</option>
                                    </select>
                                </div>
                                <div class="ui-block-c" id="div_birth_city">
                                    <select name="birth_city" id="birth_city" data-native-menu="false">
                                        <option>Choisissez la ville</option>
                                    </select>
                                </div>
                                <div class="ui-block-c" id="div_birth_commune">
                                    <select name="birth_commune" class="smallest_unit" id="birth_commune" data-native-menu="false">
                                        <option>Choisissez la commune</option>
                                    </select>
                                </div>-->
                            </div>
                        </div>
                    </p>
                    <div class="ui-field-contain">
                        <label for="highest_diploma">Plus haut dipl&ocirc;me obtenu:</label>
                        <select name="highest_diploma" id="highest_diploma" data-native-menu="false">
                            <option>Choisissez le dipl&ocirc;me</option>
                        </select>
                    </div>
                    <div class="ui-field-contain">
                        <label for="occupation_status">Status de l'emploi:</label>
                        <select name="occupation_status" id="occupation_status" data-native-menu="false">
                            <option value="">Choisissez le status de l'emploi</option>
                            <option value="1">Occupé</option>
                            <option value="2">Chômeur</option>
                            <option value="3">En quête du premier emploi</option>
                            <option value="4">Ménagère</option>
                            <option value="5">Étudiant ou Élève</option>
                            <option value="6">Retraité</option>
                            <option value="7">Rentier</option>
                            <option value="8">Autre inactif</option>
                        </select>
                    </div>
                    <div class="ui-field-contain">
                        <label for="occupation_situation">Situation de l'emploi:</label>
                        <select name="occupation_situation" id="occupation_situation" data-native-menu="false">
                            <option>Choisissez la situation de l'emploi</option>
                            <option value="1">Employeur</option>
                            <option value="2">Salarié du Public</option>
                            <option value="3">Salarié du Privé</option>
                            <option value="4">Travailleur à la Tâche</option>
                            <option value="5">Coopérative</option>
                            <option value="6">Indépendant</option>
                            <option value="7">Aide Familiale</option>
                            <option value="8">Apprenti</option>
                        </select>
                    </div>
                    <div class="ui-field-contain">
                        <label for="occupation">Occupation:</label>
                        <input type="text" name="occupation" id="occupation" value="" />
                    </div>
                    <div class="ui-field-contain">
                        <label for="religion">Religion:</label>
                        <select name="religion" id="religion" data-native-menu="false">
                            <option>Choisissez la religion</option>
                            <option value="1">Catholique</option>
                            <option value="2">Méthodiste</option>
                            <option value="3">Protestant</option>
                            <option value="4">Kimbanguiste</option>
                            <option value="5">Réveil</option>
                            <option value="6">Musulman</option>
                            <option value="7">Autre</option>
                            <option value="0">Sans Religion</option>
                        </select>
                    </div>
                    <div class="ui-field-contain">
                        <label for="handicap">Type de l'handicap:</label>
                        <select name="handicap" id="handicap" data-native-menu="false">
                            <option>Choisissez le type d'handicap</option>
                            <option value="A">Sans Handicap</option>
                            <option value="B">Sourd</option>
                            <option value="C">Non Voyant</option>
                            <option value="D">Muet</option>
                            <option value="E">Sourd-Muet</option>
                            <option value="F">Bègue</option>
                            <option value="G">Albinos</option>
                            <option value="H">Handicap des Membres Inférieurs</option>
                            <option value="I">Handicap des Membres Supérieurs</option>
                        </select>
                    </div>
                    <p>
                        <div class="ui-grid-a">
                            <div class="ui-block-c">
                                <a data-role="button" href="">
                                    Sauvez partiellement
                                </a>
                            </div>
                            <div class="ui-block-c">
                                <a data-role="button" href="#agent_address">
                                    Retour
                                </a>
                            </div>
                            <div class="ui-block-c">
                                <a data-role="button" href="#household_resident-2" class="more_resident">
                                    Continue
                                </a>
                            </div>
                        </div>
                    </p>
                </div>
                <div data-role="footer">
                    <h4>Copyright Fonsdom &copy; 2020</h4>
                </div>
            </div>
            <div data-role="page" data-dialog="true" id="filler_choice_dialog" style="max-width:400px;">
                <div data-role="header" data-theme="a">
                    <h1>Qui enregistre?</h1>
                </div>
                <div role="main" class="ui-content">
                    <!--<h3 class="ui-title">L'Agent Recenseur ou le Chef de M&eacute;nage?</h3>-->
                    <h3>Choisissez l'un des deux</h3>
                    <a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back">Agent Recenseur</a>
                    <a href="#start_filling_info" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b">Chef de M&eacute;nage</a>
                </div>
            </div>
            <div data-role="page" data-dialog="true" data-close-btn="none" id="start_filling_info">
                <div data-role="header">
                    G&eacute;n&eacute;rer le m&eacute;nage
                </div>
                <form>
                    <div style="padding:10px 20px;">
                        <h3>Remplissez le formulaire ci-dessous</h3>
                        <label for="agent_num" class="ui-hidden-accessible">Num&eacute;ro de l'Agent:</label>
                        <input type="text" name="agent_num" id="agent_num" value="" placeholder="Num&eacute;ro de l'Agent" data-theme="a">
                        <label for="prenom_agent" class="ui-hidden-accessible">Pr&eacute;nom de l'Agent:</label>
                        <input type="text" name="prenom_agent" id="prenom_agent" value="" placeholder="Prenom de l'Agent" data-theme="a">
                        <label for="nom_agent" class="ui-hidden-accessible">Nom de l'Agent:</label>
                        <input type="text" name="nom_agent" id="nom_agent" value="" placeholder="Nom de l'Agent" data-theme="a">
                        <p>Ci-bas pour le Chef de M&eacute;nage</p>
                        <label for="prenom_head" class="ui-hidden-accessible">Pr&eacute;nom:</label>
                        <input type="text" name="prenom_head" id="prenom_head" value="" placeholder="Prenom" data-theme="a">
                        <label for="nom_head" class="ui-hidden-accessible">Nom:</label>
                        <input type="text" name="nom_head" id="nom_head" value="" placeholder="Nom" data-theme="a">
                        <a href = "#household_rec" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b">
                            G&eacute;n&eacute;rer le m&eacute;nage 
                        </a>
                    </div>
                </form>
            </div>
        </form>
    </body>
</html>

<script>
var current_button_name = current_button_name || "";

$(document).on('pagecreate', '#household_address', function() {
    CensusHouseholdRecord.get_provinces_choices("select_province", "{% url 'census_api:provinces' %}");
    $(".province_choice").on('change',function(e) {
        e.preventDefault();
        if (e.handled !== true) {
            console.log("IN ADDRESS PROVINCE CHANGE");
            var that = $(this);
            CensusHouseholdRecord.get_cities_choices(that, "{% url "census_api:cities" %}");
            e.handled = true;
        }    
    });
    $(".city_choice").on('change', function(e) {
        e.preventDefault();
        if (e.handled !== true) {
            console.log("IN CITY ADDRESS CHANGE");
            var that = $(this);
            CensusHouseholdRecord.get_communes_choices(that, "{% url "census_api:communes" %}");
            e.handled = true;
        }
    });
    $('input[name=select_zone_type]').on("click", function(e) {
        console.log("TEST CLICK SELECT");
        var page_id = $(".ui-page-active").attr("id");
        console.log("THIS PAGE ID " + page_id);
        CensusHouseholdRecord.set_zone_type("select_zone_type");
    });
});

$(document).on('pagecreate', '.more_resident_page'/*'#household_resident'*/, function() {
    CensusHouseholdRecord.get_provinces_choices("birth_province", "{% url 'census_api:provinces' %}");
    $(".province_choice").on('change',function(e) {
        e.preventDefault();
        if (e.handled !== true) {
            console.log("IN PROVINCE CHANGE");
            var that = $(this);
            CensusHouseholdRecord.get_cities_choices(that, "{% url "census_api:cities" %}");
            e.handled = true;
        }
    });
    $(".city_choice").on('change', function(e) {
        e.preventDefault();
        if (e.handled !== true) {
            console.log("IN CITY CHANGE");
            var that = $(this);
            CensusHouseholdRecord.get_communes_choices(that, "{% url "census_api:communes" %}");
            e.handled = true;
        }
    });
    $(".zone_type").on('click', function(e) {
        console.log("BIRTH ZONE CLICKED");
        try {
            var page_id = $(".ui-page-active").attr("id");
            console.log("ACTIVE PAGE ID " + page_id);
            var page_id_parts = page_id.split("-");
            if (page_id_parts.length > 1) {
                var index = page_id_parts[page_id_parts.length - 1];
            }
            else {
                var index = "";
            }
            console.log("VAR INDEX " + index);
            if (page_id_parts[0] == "household_resident") {
                var clicked_id = "birth_zone_type";
                if (index) {
                    var clicked_name = clicked_id + "-" + index;
                }
                else {
                    var clicked_name = clicked_id;
                }
            }
            else {
                var clicked_name = "";
            }
            console.log("CLICKED NAME " + clicked_name);
            CensusHouseholdRecord.set_zone_type(clicked_name);        
        }
        catch (err) {
            console.log(err.message);
        }
    });
    /*
    var page_id = $(".ui-page-active").attr("id");
    var page_id_parts = page_id.split("-");
    if (page_id_parts.length > 1) {
        var index = page_id_parts[page_id_parts.length - 1];
    }
    else {
        var index = "";
    }
    if (page_id_parts[0] == "household_resident") {
        var clicked_id = "#birth_zone_type";
        clicked_name = clicked_name + "-" + index;
    }
    //current_button_name = clicked_name;
    CensusHouseholdRecord.set_zone_type(clicked_name);*/
});

$(document).on('pagecreate', '.more_resident_page', function() {
    
    $(document).on("click", ".more_resident", function(ev) {
        ev.preventDefault();
        console.log("IN NEW RESIDENT INFO");
        var resident_list = $("form").find(".resident_info");
        var ind = resident_list.length;
        ind++;
        console.log("INDICE "+ ind);
        ind = ind.toString();
        var res_html = ResidentRecord.get_record_html(ind);
        //console.log(res_html);
        $("form").append(res_html);
        $.mobile.navigate("#household_resident-"+ind);
         if (parseInt(ind) > 1) {
            console.log("CREATE HOUSEHOLD OPTIONS " + ind);
            CensusHouseholdRecord.get_provinces_choices("birth_province", "{% url 'census_api:provinces' %}", ind);
            console.log("CHECK FOR GETTING PROVINCES");
        /*  ResidentRecord.get_head_household_link_choices(ind);
            ResidentRecord.get_marrital_status_choices(ind);
            ResidentRecord.get_marrital_type_choices(ind);
            ResidentRecord.get_highest_diploma_choices(ind);
            ResidentRecord.get_occupation_status_choices(ind);
            ResidentRecord.get_occupation_situation_choices(ind);
            ResidentRecord.get_religion_choices(ind);
            ResidentRecord.get_handicap_choices(ind); */
        }
    });
});

/*
$(document).on('pagebeforeshow', function() { 
    var page_id = $.mobile.activePage.attr('id');
    console.log("THIS PAGE ID " + page_id);
    var page_id_parts = page_id.split("-");
    if (page_id_parts.length > 1) {
        var index = page_id_parts[page_id_parts.length - 1];
    }
    else {
        var index = "";
    }
    //var id_prefix = this_id_parts[0].split("_");
    if (page_id_parts[0] == "household_address") {
        var clicked_name = "#select_zone_type";
    }
    else if (page_id_parts[0] == "household_resident") {
        var clicked_id = "#birth_zone_type";
        clicked_name = clicked_name + "-" + index;
    }
    current_button_name = clicked_name;
    console.log("CLICKED ON SHOW " + current_button_name);
        
});
*/

$(document).on('pagecreate', function() {
    //console.log("CLICKED ID " + current_button_name);
    //var the_input = 'input:radio';
    $(document).on("click", 'input[name=select_zone_type]', function(e) {
        console.log("ZONE CLICKED " + $(this).attr("id"));
        e.preventDefault();
        if (e.handled !== true) {
            console.log("FOR ZONE TYPE");
            //CensusHouseholdRecord.set_zone_type(current_button_name);
            e.handled = true;
        }
    });/*
    $(document).on("click", "#select_province", function(e) {
        console.log("TEST CLICK SELECT");
    });*/
}); 


</script>